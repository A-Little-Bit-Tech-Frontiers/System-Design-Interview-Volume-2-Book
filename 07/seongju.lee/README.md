# νΈν…” μμ•½ μ‹μ¤ν…

## 1. κ°λµμ  μ„¤κ³„

## 1.1 API μ„¤κ³„

- νΈν…” κ΄€λ ¨ API (νΈν…” μƒμ„Έ μ •λ³΄, νΈν…” μ¶”κ°€/κ°±μ‹ /μ‚­μ  β†’ νΈν…” μ§μ›λ§ μ‚¬μ© κ°€λ¥)
- κ°μ‹¤ κ΄€λ ¨ API (κ°μ‹¤ μƒμ„Έ μ •λ³΄, κ°μ‹¤ μ¶”κ°€/κ°±μ‹ /μ‚­μ  β†’ νΈν…” μ§μ›λ§ μ‚¬μ© κ°€λ¥)
- μμ•½ κ΄€λ ¨ API (ν„μ¬ μ‚¬μ©μμ μμ•½ μ΄λ ¥, νΉμ • μμ•½μ μƒμ„Έ μ •λ³΄, μ‹ κ· μμ•½, μμ•½ μ·¨μ†)

μ„ API μ •λ„λ΅ κµ¬μƒν•΄λ³Ό μ μλ‹¤. μ—¬κΈ°μ„ μ‹ κ· μμ•½ μ ‘μλ” μ•„μ£Ό μ¤‘μ”ν• κΈ°λ¥μ΄λ‹¤. μƒ μμ•½(POST /v1/reservations)μ„ λ§λ“¤ λ• APIμ— μ „λ‹¬ν•λ” μΈμμ ν•νƒλ” μ•„λμ™€ κ°™λ‹¤.

```json
{
	"startDate": "2024-07-17",
	"endDate": "2024-07-20",
	"hotelId": "245",
	"roomId": "U123456789",
	"reservationId": "12345"
}
```

`reservationId`λ” μ΄μ¤‘ μμ•½μ„ λ°©μ§€ν•κ³  λ™μΌν• μμ•½μ€ λ‹¨ ν•λ²λ§ μ΄λ£¨μ–΄μ§€λ„λ΅ λ³΄μ¦ν•λ” λ©±λ“± ν‚¤μ΄λ‹¤. μ—¬κΈ°μ„ μ΄μ¤‘ μμ•½μ€ κ°™μ€ λ‚  κ°™μ€ κ°μ‹¤μ— μμ•½μ΄ μ¤‘λ³µμΌλ΅ μ΄λ£¨μ–΄μ§„ κ²ƒμ„ λ§ν•λ‹¤.


## 1.2 μ„¤κ³„μ•

<img width="564" alt="image" src="https://github.com/user-attachments/assets/eff9efc4-9f18-4a32-bfc3-0fd7c109332b">

- μ‚¬μ©μ: ν΄λ€ν°μ΄λ‚ μ»΄ν“¨ν„°λ΅ κ°μ‹¤μ„ μμ•½ν•λ” λ‹Ήμ‚¬μ
- κ΄€λ¦¬μ(νΈν…” μ§μ›): κ³ κ° ν™λ¶, μμ•½ μ·¨μ†, κ°μ‹¤ μ •λ³΄ κ°±μ‹  λ“±μ κ΄€λ¦¬ μ‘μ—…μ„ μν–‰ν•  κ¶ν•μ΄ μλ” νΈν…” μ§μ›μ΄λ‹¤.
- CDN(μ½ν…μΈ  μ „μ†΅ λ„¤νΈμ›ν¬): μλ°”μ¤ν¬λ¦½νΈ μ½”λ“ λ²λ“¤, μ΄λ―Έμ§€, λ™μμƒ, HTML λ“± λ¨λ“  μ •μ  μ½μ²ΈνΈλ¥Ό μΊμ‹ν•μ—¬ μ›Ήμ‚¬μ΄νΈ λ΅λ“ μ„±λ¥μ„ κ°μ„ ν•λ” λ° μ΄μ©λλ‹¤.
- κ³µκ° API κ²μ΄νΈμ›¨μ΄: μ²λ¦¬μ¨ μ ν•(rate limiting), μΈμ¦ λ“±μ κΈ°λ¥μ„ μ§€μ›ν•λ” μ™„μ „ κ΄€λ¦¬ν• μ„λΉ„μ¤(fully managed service)λ‹¤. μ—”λ“ν¬μΈνΈ κΈ°λ°μΌλ΅ νΉμ • μ„λΉ„μ¤μ— μ”μ²­μ„ μ „λ‹¬ν•  μ μλ„λ΅ κµ¬μ„±λλ‹¤. 
μλ¥Ό λ“¤μ–΄ νΈν…” ν™νμ΄μ§€ μ”μ²­μ€ νΈν…” μ„λΉ„μ¤λ΅, νΈν…” κ°μ‹¤ μμ•½ μ”μ²­μ€ μμ•½ μ„λΉ„μ¤λ΅ μ „λ‹¬ν•λ” μ—­ν• μ„ λ‹΄λ‹Ήν•λ‹¤.
- λ‚΄λ¶€ API: μΉμΈλ νΈν…” μ§μ›λ§ μ‚¬μ© κ°€λ¥ν• APIλ΅, λ‚΄λ¶€ μ†ν”„νΈμ›¨μ–΄λ‚ μ›Ήμ‚¬μ΄νΈλ¥Ό ν†µν•΄μ„ μ‚¬μ© κ°€λ¥ν•λ‹¤. VPN(Virtual Private Network) λ“±μ κΈ°μ μ„ μ‚¬μ©ν•΄ μ™Έλ¶€ κ³µκ²©μΌλ΅λ¶€ν„° λ³΄νΈλλ‹¤.
- νΈν…” μ„λΉ„μ¤: νΈν…”κ³Ό κ°μ‹¤μ— λ€ν• μƒμ„Έ μ •λ³΄λ¥Ό μ κ³µν•λ‹¤. νΈν…”κ³Ό κ°μ‹¤ λ°μ΄ν„°λ” μΌλ°μ μΌλ΅ μ •μ μ΄λΌμ„ μ‰½κ² μΊμ‹ν•΄ λ‘ μ μλ‹¤.
- μ”κΈ μ„λΉ„μ¤: λ―Έλμ μ–΄λ–¤ λ‚ μ— μ–΄λ–¤ μ”κΈμ„ λ°›μ•„μ•Ό ν•λ”μ§€ λ°μ΄ν„°λ¥Ό μ κ³µν•λ” μ„λΉ„μ¤λ‹¤. μ¬λ―Έμλ” κ²ƒμ€ κ°μ‹¤μ μ”κΈμ€ ν•΄λ‹Ή λ‚ μ§μ— νΈν…”μ— μ–Όλ§λ‚ λ§μ€ μ†λ‹μ΄ λ°λ¦¬λλƒμ— λ”°λΌ λ‹¬λΌμ§„λ‹¤λ” κ²ƒμ΄λ‹¤.
- μμ•½ μ„λΉ„μ¤: μμ•½ μ”μ²­μ„ λ°›κ³  κ°μ‹¤μ„ μμ•½ν•λ” κ³Όμ •μ„ μ²λ¦¬ν•λ‹¤. **κ°μ‹¤μ΄ μμ•½λκ±°λ‚ μ·¨μ†λ  λ• μ”μ—¬ κ°μ‹¤ μ •λ³΄λ¥Ό κ°±μ‹ ν•λ” μ—­ν• λ„ λ‹΄λ‹Ήν•λ‹¤.**
- κ²°μ  μ„λΉ„μ¤: κ³ κ°μ κ²°μ λ¥Ό λ§΅μ•„ μ²λ¦¬ν•κ³ , **μ μ°¨κ°€ μ„±κ³µμ μΌλ΅ λ§λ¬΄λ¦¬λλ©΄ μμ•½ μƒνƒλ¥Ό κ²°μ  μ™„λ£λ΅ κ°±μ‹ ν•λ©° μ‹¤ν¨ν• κ²½μ°μ—λ” μΉμΈ μ‹¤ν¨λ΅ μ—…λ°μ΄νΈ**ν•λ‹¤.
- νΈν…” κ΄€λ¦¬ μ„λΉ„μ¤: μΉμΈλ νΈν…” μ§μ›λ§ μ‚¬μ© κ°€λ¥ν• μ„λΉ„μ¤λ‹¤. μ„λ°•ν• μμ•½ κΈ°λ΅ ν™•μΈ, κ³ κ° κ°μ‹¤ μμ•½, μμ•½ μ·¨μ† λ“±μ κΈ°λ¥μ„ μ κ³µν•λ‹¤.



## 2. μƒμ„Έ μ„¤κ³„

### 2.1 λ°μ΄ν„° λ¨λΈ

<img width="499" alt="image" src="https://github.com/user-attachments/assets/75234dcb-5bf8-427c-a27a-926e62e14dbe">

- room: κ°μ‹¤μ— κ΄€κ³„λ μ •λ³΄λ¥Ό λ‹΄λ”λ‹¤.
- room_type_rate: νΉμ • κ°μ‹¤ μ ν•μ νΉμ • μΌμ μ”κΈ μ •λ³΄λ¥Ό λ‹΄λ”λ‹¤.
- reservation: ν¬μ™κ° μμ•½ μ •λ³΄λ¥Ό λ‹΄λ”λ‹¤.
- room_type_inventory: νΈν…”μ λ¨λ“  κ°μ‹¤ μ ν•μ„ λ‹΄λ” ν…μ΄λΈ”μ΄λ‹¤. μμ•½ μ‹μ¤ν…μ— μ•„μ£Ό μ¤‘μ”ν•λ‹, κ° μ—΄μ μλ―Έλ¥Ό μμ„Έν μ§μ–΄λ³΄μ.
    - hotel_id: νΈν…” μ‹λ³„μ
    - room_type_id: κ°μ‹¤ μ ν• μ‹λ³„μ
    - date: μΌμ
    - total_inventory: μ΄ κ°μ‹¤ μμ—μ„ μΌμ‹μ μΌλ΅ μ μ™Έν• κ°μ‹¤ μλ¥Ό λΊ€ κ°’μ΄λ‹¤. μΌλ¶€ κ°μ‹¤μ€ μ μ§€λ³΄μλ¥Ό μ„ν•΄ μμ•½ κ°€λ¥ λ©λ΅μ—μ„ λΉΌ λ‘ μ μμ–΄μ•Ό ν•λ‹¤. (room_type λΏλ§ μ•„λ‹λΌ νƒ€μ…μ— λ”°λ¥Έ μ¬κ³ λ¥Ό κ΄€λ¦¬ν•΄μ•Ό ν•λ―€λ΅ λ³„λ„μ ν…μ΄λΈ”λ΅ λ¶„λ¦¬ π‘)
    - total_reserved: μ§€μ •λ hotel_id, room_type_id, dateμ— μμ•½λ λ¨λ“  κ°μ‹¤μ μ

`room_type_inventory`μ™€ κ°™μ΄ λ‚ μ§λ‹Ή ν•λ‚μ λ μ½”λ“λ¥Ό μ‚¬μ©ν•λ©΄ λ‚ μ§ λ²”μ„ λ‚΄μ—μ„ μμ•½μ„ μ‰½κ² κ΄€λ¦¬ν•κ³  μ§μν•  μ μλ‹¤. (νΉμ • μ ν• κ°μ‹¤μ μμ•½ μ—¬λ¶€λ¥Ό ν™•μΈν•  λ• μ‚¬μ©ν•λ” ν…μ΄λΈ”μΈ κ²ƒμ²λΌ νΉμ •κΈ°λ¥μ„ μµμ μ μ„±λ¥μΌλ΅ μ κ³µν•κΈ° μ„ν•΄ κ³Όκ°ν•κ² ν…μ΄λΈ”μ„ λ¶„λ¦¬)
μ΄ ν…μ΄λΈ”μ κΈ°λ³Έν‚¤λ” (hotel_id, room_type_id, date)μ λ³µν•©ν‚¤λ‹¤. μ΄ ν…μ΄λΈ”μ€ 2λ…„ μ΄λ‚΄ λ¨λ“  λ―Έλ λ‚ μ§μ— λ€ν• κ°€μ© κ°μ‹¤ λ°μ΄ν„° μ§μ κ²°κ³Όλ¥Ό ν† λ€λ΅ λ―Έλ¦¬ μ±„μ› λ†“κ³ , μ‹κ°„μ΄ νλ¦„μ— λ”°λΌ μƒλ΅ μ¶”κ°€ν•΄μ•Ό ν•λ” κ°μ‹¤ μ •λ³΄λ” λ§¤μΌ ν• λ²μ”© μΌκ΄„ μ‘μ—…μ„ λλ ¤ λ°μν•λ‹¤.


### 2.2 μ‹μ¤ν… κ·λ¨ ν™•μ¥

**2.2.1 λ°μ΄ν„°λ² μ΄μ¤ μƒ¤λ”©**
λ°μ΄ν„°λ² μ΄μ¤μ κ·λ¨λ¥Ό ν• κ°€μ§€ λ°©λ²•μ€ μƒ¤λ”©μ„ μ μ©ν•λ” κ²ƒμ΄λ‹¤. λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ—¬λ¬ λ€ λ‘κ³ , κ°κ°μ— λ°μ΄ν„°μ μΌλ¶€λ§ λ³΄κ΄€ν•λ„λ΅ ν•λ” κ²ƒμ΄ κΈ°λ³Έμ μΈ μ•„μ΄λ””μ–΄λ‹¤. μƒ¤λ”©ν•  λ•λ” λ°μ΄ν„°λ¥Ό μ–΄λ–»κ² λ¶„λ°°ν• μ§€ λ¨Όμ € μ •ν•΄μ•Ό ν•λ‹¤.  
μ΄ μ‹μ¤ν…μ λ€λ¶€λ¶„ μ§μλ” hotel_idλ¥Ό ν•„ν„°λ§ μ΅°κ±΄μΌλ΅ μ‚¬μ©ν•λ‹¤. λ”°λΌμ„ μμ—°μ¤λ½κ² hotel_idλ¥Ό μƒ¤λ”© μ΅°κ±΄μΌλ΅ μ“°λ©΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤.


**2.2.2 μΊμ‹**

νΈν…” μ”μ—¬ κ°μ‹¤ λ°μ΄ν„°μ—λ” μ¬λ―Έμλ” νΉμ„±μ΄ μλ‹¤. μ¤μ§ ν„μ¬ κ·Έλ¦¬κ³  λ―Έλμ λ°μ΄ν„°λ§μ΄ μ¤‘μ”ν•λ‹¤λ” κ²ƒμ΄λ‹¤. κ³ κ°μ΄ κ³Όκ±°μ μ–΄λ–¤ κ°μ‹¤μ„ μμ•½ν•λ ¤ ν•μ§€λ” μ•μ„ κ²ƒμ΄κΈ° λ•λ¬Έμ΄λ‹¤.  
λ”°λΌμ„ λ°μ΄ν„°λ¥Ό λ³΄κ΄€ν•  λ• λ‚΅μ€ λ°μ΄ν„°λ” μλ™μ μΌλ΅ μ†λ©Έλλ„λ΅ TTL(Time-To-Live)μ„ μ„¤μ •ν•  μ μλ‹¤λ©΄ λ°”λμ§ν•λ‹¤. 
μ΄λ ¥ λ°μ΄ν„°μ—λ” λ‹¤λ¥Έ λ°μ΄ν„°λ² μ΄μ¤λ¥Ό ν†µν•΄ μ§μν•λ„λ΅ ν•λ©΄ λλ‹¤. **λ λ””μ¤λ” μ΄λ° μƒν™©μ— μ ν•©ν•λ° TTLκ³Ό LRU μΊμ‹ κµμ²΄ μ •μ±…μ„ μ‚¬μ©ν•μ—¬ λ©”λ¨λ¦¬λ¥Ό μµμ μΌλ΅ ν™μ©ν•  μ μκΈ° λ•λ¬Έ**μ΄λ‹¤.  
λ°μ΄ν„° λ΅λ”© μ†λ„μ™€ λ°μ΄ν„°λ² μ΄μ¤ ν™•μ¥μ„±μ΄ λ¬Έμ κ°€ λκΈ° μ‹μ‘ν•λ©΄ λ°μ΄ν„°λ² μ΄μ¤ μ•μ— μΊμ‹ κ³„μΈµμ„ λ‘κ³  μ”μ—¬ κ°μ‹¤ ν™•μΈ λ° κ°μ‹¤ μμ•½ λ΅μ§μ΄ ν•΄λ‹Ή κ³„μΈµμ—μ„ μ‹¤ν–‰λλ„λ΅ ν•  μ μλ‹¤. 
μ΄λ ‡κ² ν•λ©΄ μ”μ²­ κ°€μ΄λ° μΌλ¶€λ§ μ”μ—¬ κ°μ‹¤ λ°μ΄ν„°λ² μ΄μ¤κ°€ μ²λ¦¬ν•κ³  λ‚λ¨Έμ§€λ” μΊμ‹κ°€ λ‹΄λ‹Ήν•λ‹¤.

- TTLμ„ ν†µν•΄ λ‚΅μ€ λ°μ΄ν„°λ¥Ό μ†λ©Έλλ„λ΅ μ²λ¦¬ν•λ” κ²ƒμ΄ μΈμƒμ 
- μ΄λ¥Ό μµμ μΌλ΅ ν™μ©ν•κΈ° μ„ν•΄ Redisλ¥Ό μ„ νƒν•κ²ƒλ„ κΈ°μ–µν•΄λ‘λ©΄ μΆ‹μ„ λ“―ν•λ‹¤.
